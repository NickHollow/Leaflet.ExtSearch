{"version":3,"sources":["webpack:///webpack/bootstrap c466a90afc48c9c37e10","webpack:///./E:/projects/Leaflet.ExtSearch/src/SearchControl.js","webpack:///./src/SearchControl.css","webpack:///./E:/projects/Leaflet.ExtSearch/src/ResultView.js","webpack:///./E:/projects/Leaflet.ExtSearch/src/GmxRenderer.js","webpack:///./E:/projects/Leaflet.ExtSearch/src/DataProviders/OsmDataProvider.js","webpack:///./E:/projects/Leaflet.ExtSearch/src/DataProviders/CoordinatesDataProvider.js","webpack:///./E:/projects/Leaflet.ExtSearch/src/DataProviders/CadastreDataProvider.js"],"names":["SearchControl","L","Control","extend","includes","Mixin","Events","initialize","options","setOptions","_chain","tasks","state","reduce","prev","next","then","Promise","resolve","reject","_handleChange","e","text","_input","value","length","providers","filter","provider","showSuggestion","map","showFirst","completed","find","limit","response","concat","results","show","_handleMouseMove","stopPropagation","_search","showOnEnter","p","features","x","showOnMap","feature","_renderer","render","style","_selectItem","item","fetch","properties","showOnSelect","_handleCollapse","preventDefault","btn","target","expanded","DomUtil","hasClass","removeClass","addClass","display","onAdd","_container","create","innerHTML","placeHolder","querySelector","button","addEventListener","bind","input","onSelect","onEnter","renderer","window","nsGmx","ResultView","_onSelect","_onEnter","index","count","_item","_inputText","_list","setAttribute","top","offsetTop","offsetHeight","left","offsetLeft","_handleKey","_handleFocus","_handleWheel","parentElement","appendChild","el","listVisible","key","selectItem","focus","setSelectionRange","hide","complete","i","_items","name","items","html","join","elements","querySelectorAll","_handleClick","GmxRenderer","_map","_gmxDrawing","gmxDrawing","json","a","geojson","geoJson","lineStyle","onEachFeature","layer","add","addData","geometry","bounds","getBounds","fitBounds","invalidateSize","OsmDataProvider","serverBase","onFetch","_serverBase","_onFetch","_convertGeometry","_key","KOSMOSNIMKI_SESSION_KEY","type","toUpperCase","obj","query","ObjCode","TypeCode","req","Request","headers","Headers","append","init","method","mode","cache","JSON","parse","slice","Status","rs","Result","SearchResult","g","Geometry","props","Object","keys","k","strong","retrieveGeometry","_strong","Boolean","_withoutGeometry","encodeURIComponent","ObjNameShort","CoordinatesDataProvider","rxLat","RegExp","rxLng","coords","split","lat","exec","parseFloat","lng","hasOwnProperty","coordinates","_parseCoordinates","result","CadastreDataProvider","tolerance","_tolerance","_cadastreLayers","id","title","reg","str","trim","len","it","status","cadastreLayer","getCadastreLayer","attrs"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c466a90afc48c9c37e10","import './SearchControl.css';\r\nimport { ResultView } from './ResultView.js';\r\nimport { GmxRenderer } from './GmxRenderer.js';\r\nimport { OsmDataProvider } from './DataProviders/OsmDataProvider.js';\r\nimport { CoordinatesDataProvider } from './DataProviders/CoordinatesDataProvider.js';\r\nimport { CadastreDataProvider } from './DataProviders/CadastreDataProvider.js';\r\n\r\nlet SearchControl = L.Control.extend({\r\n    includes: [L.Mixin.Events],\r\n    initialize: function(options) {    \r\n        L.setOptions(this, options);\r\n    },\r\n    _chain (tasks, state) {        \r\n        return tasks.reduce(\r\n            (prev, next) => prev.then(next),\r\n            new Promise ((resolve, reject) => resolve (state))\r\n        );\r\n    },\r\n    _handleChange: function(e){\r\n        const text = this._input.value;\r\n        if(text.length){\r\n\r\n            let tasks = this.options.providers\r\n                .filter (provider => provider.showSuggestion)\r\n                .map(provider => {\r\n                    return state => {\r\n                        return new Promise(resolve => {\r\n                            if (this.options.showFirst && state.completed) {\r\n                                resolve(state);\r\n                            }\r\n                            else {\r\n                                provider\r\n                                .find (text, this.options.limit, false, false)\r\n                                .then(response => {\r\n                                    state.completed = this.options.showFirst && response.length > 0;\r\n                                    state.response = state.response.concat(response);                                \r\n                                    resolve(state);\r\n                                });                          \r\n                            }\r\n                        });\r\n                    };\r\n                });\r\n\r\n            this._chain (tasks, { completed: false, response: [] }).then(state => {                \r\n                this.results.show(state.response);\r\n            });\r\n        }        \r\n    },\r\n    _handleMouseMove: function(e){\r\n        e.stopPropagation();\r\n    },\r\n    _search: function (text) {\r\n        let tasks = this.options.providers\r\n            .filter (provider => provider.showOnEnter)\r\n            .map(provider => {\r\n                return state => {\r\n                    return new Promise(resolve => {\r\n                        if (this.options.showFirst && state.completed) {\r\n                            resolve(state);\r\n                        }\r\n                        else {\r\n                            let p = provider.find (text, 1, true, true);\r\n                            p.then(response => {\r\n                                state.completed = response.length > 0;\r\n                                state.response = state.response.concat(response);                                \r\n                                resolve(state);\r\n                            });\r\n                        }\r\n                    });\r\n                };\r\n            });\r\n\r\n            this._chain (tasks, {completed: false, response: []})\r\n            .then(state => {\r\n                const features = state.response\r\n                .filter(x => x.provider.showOnMap)\r\n                .map(x => x.feature);\r\n                if(features.length) {\r\n                    this._renderer.render([features[0]], this.options.style);\r\n                }                \r\n            });\r\n    },\r\n    _selectItem: function(item){        \r\n        item.provider\r\n        .fetch(item.properties)\r\n        .then(response => {\r\n            if (item.provider.showOnSelect && response.length) {\r\n                let features = response\r\n                .filter(x => x.provider.showOnMap)\r\n                .map (x => x.feature);\r\n                this._renderer.render(features, this.options.style);                \r\n            }            \r\n        });\r\n    },\r\n    _handleCollapse: function(e){\r\n        e.preventDefault();\r\n        let btn = e.target;\r\n        let expanded = L.DomUtil.hasClass (btn, 'leaflet-ext-search-button-expanded');\r\n        if (expanded) {\r\n            L.DomUtil.removeClass (btn, 'leaflet-ext-search-button-expanded');\r\n            L.DomUtil.addClass (btn, 'leaflet-ext-search-button-collapsed');\r\n            this._input.style.display = 'none';\r\n        }\r\n        else {\r\n            L.DomUtil.removeClass (btn, 'leaflet-ext-search-button-collapsed');\r\n            L.DomUtil.addClass (btn, 'leaflet-ext-search-button-expanded');\r\n            this._input.style.display = 'inline';\r\n        }\r\n    },\r\n    onAdd: function(map) {\r\n        this._container = L.DomUtil.create('div', 'leaflet-ext-search');\r\n        this._container.innerHTML = `<input type=\"text\" value=\"\" placeholder=\"${this.options.placeHolder}\" /><span class=\"leaflet-ext-search-button leaflet-ext-search-button-expanded\"></span>`;\r\n        this._input = this._container.querySelector('input');\r\n\r\n        // const style = getComputedStyle (map._container);\r\n        // const matches = (/\\d+/g).exec (style.width);\r\n        // if(matches && matches.length){\r\n        //     const width = Number.parseInt (matches[0]) - 50;\r\n        //     this._input.style.width = `${width}px`;\r\n        // }\r\n\r\n        let button = this._container.querySelector('.leaflet-ext-search-button');\r\n        button.addEventListener ('click', this._handleCollapse.bind(this));\r\n              \r\n        this._input.addEventListener('input', this._handleChange.bind(this));\r\n        this._input.addEventListener('mousemove', this._handleMouseMove.bind(this));\r\n\r\n        this.results = new ResultView({\r\n            input: this._input,\r\n            onSelect: this._selectItem.bind(this),\r\n            onEnter: this._search.bind(this),\r\n        });        \r\n\r\n        this._renderer = this.options.renderer || new GmxRenderer(map);\r\n\r\n        return this._container;\r\n    }\r\n});\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.SearchControl = SearchControl; \r\n\r\nexport { SearchControl };\r\n\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/SearchControl.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/SearchControl.css\n// module id = 1\n// module chunks = 0","class ResultView {\r\n    constructor({input, onSelect, onEnter}){\r\n        this._input = input;\r\n        this._onSelect = onSelect;\r\n        this._onEnter = onEnter;\r\n        this.index = -1;\r\n        this.count = 0;\r\n        this._item = null;\r\n        this._inputText = '';\r\n        this._list = L.DomUtil.create('div');\r\n        this._list.setAttribute('class', 'leaflet-ext-search-list noselect');        \r\n\r\n        this._list.style.top = `${this._input.offsetTop + this._input.offsetHeight + 2}px`;\r\n        this._list.style.left = `${this._input.offsetLeft}px`;\r\n        this._input.addEventListener('keydown', this._handleKey.bind(this));\r\n        this._input.addEventListener('focus', this._handleFocus.bind(this));\r\n        this._list.addEventListener('keydown', this._handleKey.bind(this));\r\n        this._list.addEventListener('wheel', this._handleWheel.bind(this));\r\n        // this._list.addEventListener('mousemove', this._handleWheel.bind(this));\r\n        this._input.parentElement.appendChild(this._list); \r\n        this._input.addEventListener('input', this._handleChange.bind(this));      \r\n    }  \r\n\r\n    _handleFocus(e){        \r\n        if(this.index >= 0) {\r\n            let el = this._list.querySelector(`[tabindex=\"${this.index}\"]`); \r\n            L.DomUtil.removeClass (el, 'leaflet-ext-search-list-selected');\r\n        }\r\n        this.index = -1;\r\n        this._item = null;\r\n    } \r\n\r\n    _handleChange(e){\r\n        this._inputText = this._input.value;\r\n    }\r\n\r\n    _handleWheel (e) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    _handleMouseMove(e){\r\n        e.stopPropagation();\r\n    }    \r\n\r\n    _handleKey(e){\r\n        if(this.listVisible()) {\r\n            if(e.key === 'ArrowDown'){            \r\n                e.preventDefault();                 \r\n                if (this.index < 0){\r\n                    this.index = 0;\r\n                }\r\n                else if (0 <= this.index && this.index < this.count - 1){\r\n                    let el = this._list.querySelector(`[tabindex=\"${this.index}\"]`);\r\n                    L.DomUtil.removeClass (el, 'leaflet-ext-search-list-selected');\r\n                    ++this.index;\r\n                }   \r\n                else {\r\n                    let el = this._list.querySelector(`[tabindex=\"${this.index}\"]`);\r\n                    L.DomUtil.removeClass (el, 'leaflet-ext-search-list-selected');\r\n                    this.index = this.count - 1;\r\n                }\r\n                let el = this._list.querySelector(`[tabindex=\"${this.index}\"]`);\r\n                L.DomUtil.addClass (el, 'leaflet-ext-search-list-selected'); \r\n                this.selectItem(this.index);\r\n                el.focus();          \r\n            }\r\n            else if (e.key === 'ArrowUp'){\r\n                e.preventDefault();            \r\n                if(this.index > 0){\r\n                    let el = this._list.querySelector(`[tabindex=\"${this.index}\"]`); \r\n                    L.DomUtil.removeClass (el, 'leaflet-ext-search-list-selected');\r\n                    --this.index;\r\n                    el = this._list.querySelector(`[tabindex=\"${this.index}\"]`);\r\n                    L.DomUtil.addClass (el, 'leaflet-ext-search-list-selected');\r\n                    this.selectItem(this.index);\r\n                    el.focus();            \r\n                }\r\n                else if (this.index === 0) {                    \r\n                    this._input.focus();                \r\n                    this._input.value = this._inputText;                    \r\n                }            \r\n            }\r\n            else if (e.key === 'Enter'){\r\n                if (this.index < 0 && this._input.value && typeof this._onEnter == 'function'){\r\n                    const text = this._input.value;\r\n                    this._input.focus();\r\n                    this._input.setSelectionRange(text.length, text.length);                                      \r\n                    this.hide();                        \r\n                    this._onEnter (text);\r\n                }\r\n                else {\r\n                    this.complete (this.index);\r\n                }                \r\n            }\r\n            else if (e.key === 'Escape'){\r\n                if (this.index < 0) {\r\n                    this.hide ();\r\n                }\r\n                this._input.focus();\r\n                this._input.value = this._inputText;                            \r\n            } \r\n        }\r\n        else {\r\n            if (e.key === 'Enter' && this._input.value && typeof this._onEnter == 'function'){ \r\n                const text = this._input.value;\r\n                this._input.setSelectionRange(text.length, text.length);\r\n                this._onEnter (text);\r\n            }\r\n            else if (e.key === 'Escape'){\r\n                this._input.value = '';\r\n                this.index = -1;\r\n                this._input.focus();                \r\n            }\r\n        }                                                     \r\n    }\r\n\r\n    listVisible(){\r\n        return this.count > 0 && this._list.style.display !== 'none';\r\n    }\r\n\r\n    selectItem(i){        \r\n        this._item = this._items[i];        \r\n        const text = this._item.name;\r\n        this._input.value = text;\r\n        this._input.setSelectionRange(text.length, text.length);        \r\n    }\r\n\r\n    _handleClick (i, e){\r\n        e.preventDefault();\r\n        this.complete (i);\r\n    }\r\n\r\n    complete(i){\r\n        let item = i >= 0 ? this._items[i] : this._item ? this._item : null;\r\n        if(item) {\r\n            this._item = item;        \r\n            this.index = -1;            \r\n            const text = item.name;\r\n            this._input.value = text;\r\n            this._input.setSelectionRange(text.length, text.length);                          \r\n            this._input.focus();\r\n            this.hide();\r\n            if(typeof this._onSelect === 'function'){\r\n                this._onSelect (item);\r\n            }\r\n        }        \r\n    }\r\n\r\n    show(items) {\r\n        if (items.length) {\r\n            this._item = null;\r\n            this.index = -1;\r\n            this._items = items;\r\n            const html = '<ul>' + this._items.map((x,i) => `<li tabindex=${i}>${x.name}</li>`, []).join('') + '</ul>';                            \r\n\r\n            this._list.innerHTML = html;\r\n            let elements = this._list.querySelectorAll('li');\r\n            for (let i = 0; i < elements.length; ++i){\r\n                elements[i].addEventListener('click', this._handleClick.bind(this, i));            \r\n            }\r\n            \r\n            this.count = elements.length;\r\n            this._list.style.display = 'block';\r\n        }\r\n    }\r\n    hide() {        \r\n        this._list.style.display = 'none';                \r\n    }\r\n\r\n}\r\n\r\nexport { ResultView };\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/ResultView.js","class GmxRenderer {\r\n    constructor(map){\r\n        this._map = map;\r\n        this._gmxDrawing = this._map.gmxDrawing;         \r\n    }\r\n    render(features, style){\r\n        if(features && features.length){\r\n            let json = features\r\n            .reduce ((a, geojson) => {                \r\n                L.geoJson (geojson, {\r\n                    style: function (feature) {\r\n                        return style.lineStyle;\r\n                    },\r\n                    onEachFeature: function (feature, layer) {\r\n                        this._gmxDrawing.add(layer, style);\r\n                    }.bind(this)\r\n                });\r\n                a.addData(geojson.geometry);\r\n                return a;\r\n            }, L.geoJson());\r\n            let bounds = json.getBounds();\r\n            this._map.fitBounds(bounds);\r\n            this._map.invalidateSize();\r\n        }\r\n    }\r\n}\r\n\r\nexport { GmxRenderer };\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/GmxRenderer.js","\r\nclass OsmDataProvider {\r\n    constructor({serverBase, limit, onFetch, showOnMap}){\r\n        this._serverBase = serverBase;\r\n        this._onFetch = onFetch;        \r\n        this.showSuggestion = true;\r\n        this.showOnMap = showOnMap;\r\n        this.showOnSelect = true;\r\n        this.showOnEnter = true;\r\n        this.find = this.find.bind(this);\r\n        this.fetch = this.fetch.bind(this);\r\n        this._convertGeometry = this._convertGeometry.bind(this);\r\n\r\n        this._key = window.KOSMOSNIMKI_SESSION_KEY == null || window.KOSMOSNIMKI_SESSION_KEY == 'INVALID' ? '' : `&key=${window.KOSMOSNIMKI_SESSION_KEY}`;\r\n    }\r\n    _convertGeometry(geometry) {        \r\n        switch (geometry.type.toUpperCase()) {\r\n            case 'POINT':\r\n                geometry.type = 'Point';\r\n                break;\r\n            case 'POLYGON':\r\n                geometry.type = 'Polygon';\r\n                break;\r\n            case 'MULTIPOLYGON':\r\n                geometry.type = 'MultiPolygon';\r\n                break;\r\n            case 'LINESTRING':\r\n            case 'POLYLINE':\r\n                geometry.type = 'LineString';\r\n                break;\r\n            case 'MULTILINESTRING':\r\n                geometry.type = 'MultiLineString';\r\n                break;\r\n            default:\r\n                throw 'Unknown WKT type';\r\n        }\r\n        return geometry;\r\n    }\r\n    fetch (obj) {\r\n        const query = `RequestType=ID&ID=${obj.ObjCode}&TypeCode=${obj.TypeCode}&UseOSM=1`;        \r\n        let req = new Request(`${this._serverBase}/SearchObject/SearchAddress.ashx?${query}${this._key}`);\r\n        let headers = new Headers();\r\n        headers.append('Content-Type','application/json');\r\n        let init = {\r\n            method: 'GET',            \r\n            mode: 'cors',\r\n            cache: 'default',\r\n        };\r\n        return new Promise((resolve, reject) => {\r\n            fetch (req, init)\r\n            .then(response => response.text())\r\n            .then(response => {                \r\n                const json = JSON.parse (response.slice(1, response.length - 1));\r\n                if(json.Status === 'ok'){\r\n                    const rs = json.Result\r\n                    .reduce((a,x) => a.concat(x.SearchResult), [])\r\n                    .map(x => {\r\n                        let g = this._convertGeometry (x.Geometry);\r\n                        let props = Object.keys(x)\r\n                        .filter(k => k !== 'Geometry')\r\n                        .reduce((a,k) => {\r\n                            a[k] = x[k];\r\n                            return a;\r\n                        }, {});\r\n                        return {\r\n                            feature: {\r\n                                type: 'Feature',\r\n                                geometry: g,\r\n                                properties: props,                            \r\n                            },\r\n                            provider: this,\r\n                            query: obj,\r\n                        };\r\n                    });\r\n                    if (typeof this._onFetch === 'function'){\r\n                        this._onFetch(rs);\r\n                    }                \r\n                    resolve(rs);\r\n                }\r\n                else {\r\n                    reject(json);\r\n                }                \r\n            });\r\n        });\r\n    }\r\n    find(value, limit, strong, retrieveGeometry){\r\n        const _strong = Boolean(strong) ? 1 : 0;\r\n        const _withoutGeometry = Boolean(retrieveGeometry) ? 0 : 1; \r\n        const query = `RequestType=SearchObject&IsStrongSearch=${_strong}&WithoutGeometry=${_withoutGeometry}&UseOSM=1&Limit=${limit}&SearchString=${encodeURIComponent(value)}`;        \r\n        let req = new Request(`${this._serverBase}/SearchObject/SearchAddress.ashx?${query}${this._key}`);\r\n        let headers = new Headers();\r\n        headers.append('Content-Type','application/json');\r\n        let init = {\r\n            method: 'GET',\r\n            mode: 'cors',\r\n            cache: 'default',\r\n        };\r\n        return new Promise((resolve, reject) => {\r\n            fetch (req, init)\r\n            .then(response => response.text())\r\n            .then(response => {\r\n                const json = JSON.parse (response.slice(1, response.length - 1));\r\n                if(json.Status === 'ok'){                    \r\n                    const rs = json.Result\r\n                    .reduce((a,x) => a.concat(x.SearchResult), [])\r\n                    .map(x => {\r\n                        if (retrieveGeometry) {\r\n                            let g = this._convertGeometry (x.Geometry);\r\n                            let props = Object.keys(x)\r\n                            .filter(k => k !== 'Geometry')\r\n                            .reduce((a,k) => {\r\n                                a[k] = x[k];\r\n                                return a;\r\n                            }, {});\r\n                            return {\r\n                                feature: {\r\n                                    type: 'Feature',\r\n                                    geometry: g,\r\n                                    properties: props,                            \r\n                                },\r\n                                provider: this,\r\n                                query: value,\r\n                            };\r\n                        }\r\n                        else {\r\n                            return {\r\n                                name: x.ObjNameShort,\r\n                                properties: x,\r\n                                provider: this,\r\n                                query: value,\r\n                            };\r\n                        }                        \r\n                    });\r\n                    if (limit === 1 && strong && retrieveGeometry && typeof this._onFetch === 'function'){\r\n                        this._onFetch(rs);\r\n                    }\r\n                    resolve(rs);                    \r\n                }\r\n                else {\r\n                    reject(json);\r\n                }                \r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.OsmDataProvider = OsmDataProvider;\r\n\r\nexport { OsmDataProvider };\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/DataProviders/OsmDataProvider.js","\r\nclass CoordinatesDataProvider {\r\n    constructor({onFetch, showOnMap}){\r\n        this._onFetch = onFetch;\r\n        this.showSuggestion = false;\r\n        this.showOnMap = showOnMap;\r\n        this.showOnSelect = false;\r\n        this.showOnEnter = true;\r\n        this.fetch = this.fetch.bind(this);\r\n        this.find = this.find.bind(this);\r\n        this.rxLat = new RegExp('(\\\\d+\\\\.?\\\\d+)\\\\s*(N|S)');\r\n        this.rxLng = new RegExp('(\\\\d+\\\\.?\\\\d+)\\\\s*(E|W)');\r\n    }\r\n    _parseCoordinates(value) {\r\n        let coords = value.split(/(,|\\\\s+)/)\r\n        .reduce((a,x) => {\r\n            const lat = this.rxLat.exec(x);\r\n            if(lat && lat.length) {\r\n                a.lat = parseFloat(lat[1]);\r\n                if (lat[2] == 'S'){\r\n                    a.lat = -a.lat;\r\n                }\r\n            }\r\n            const lng = this.rxLng.exec(x);\r\n            if(lng && lng.length) {\r\n                a.lng = parseFloat(lng[1]);\r\n                if (lng[2] == 'W'){\r\n                    a.lng = -a.lng;\r\n                }\r\n            }\r\n            return a;\r\n        },{});\r\n        if (coords.hasOwnProperty('lat') && coords.hasOwnProperty('lng')){\r\n            return {type: 'Point', coordinates: [coords.lng, coords.lat]};\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    fetch (value){\r\n        return new Promise(resolve => resolve([]));        \r\n    }\r\n    find(value, limit, strong, retrieveGeometry){\r\n        let g = this._parseCoordinates(value);        \r\n        return new Promise(resolve => {\r\n            let result = {feature: { type: 'Feature', geometry: g, properties: {} }, provider: this, query: value};\r\n            if (g && typeof this._onFetch === 'function'){\r\n                this._onFetch(result);\r\n            }             \r\n            resolve(g ? [result] : []);\r\n        });\r\n    }\r\n}\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.CoordinatesDataProvider = CoordinatesDataProvider;\r\n\r\nexport { CoordinatesDataProvider };\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/DataProviders/CoordinatesDataProvider.js","class CadastreDataProvider {\r\n    constructor({serverBase, limit, tolerance, onFetch, showOnMap}){\r\n        this._serverBase = serverBase;        \r\n        this._tolerance = tolerance;\r\n        this._onFetch = onFetch;\r\n        this.showSuggestion = true;\r\n        this.showOnMap = showOnMap;\r\n        this.showOnSelect = false;\r\n        this.showOnEnter = false;\r\n        this._cadastreLayers = [\r\n\t\t\t{id: 5, title: 'ОКС', \t\treg: /^\\d\\d:\\d+:\\d+:\\d+:\\d+$/},\r\n\t\t\t{id: 1, title: 'Участок', \treg: /^\\d\\d:\\d+:\\d+:\\d+$/},\r\n\t\t\t{id: 2, title: 'Квартал',\treg: /^\\d\\d:\\d+:\\d+$/},\r\n\t\t\t{id: 3, title: 'Район', \treg: /^\\d\\d:\\d+$/},\r\n\t\t\t{id: 4, title: 'Округ', \treg: /^\\d\\d$/},\r\n\t\t\t{id: 10, title: 'ЗОУИТ', \treg: /^\\d+\\.\\d+\\.\\d+/}\r\n\t\t\t// ,\r\n\t\t\t// {id: 7, title: 'Границы', \treg: /^\\w+$/},\r\n\t\t\t// {id: 6, title: 'Тер.зоны', \treg: /^\\w+$/},\r\n\t\t\t// {id: 12, title: 'Лес', \t\treg: /^\\w+$/},\r\n\t\t\t// {id: 13, title: 'Красные линии', \t\treg: /^\\w+$/},\r\n\t\t\t// {id: 15, title: 'СРЗУ', \treg: /^\\w+$/},\r\n\t\t\t// {id: 16, title: 'ОЭЗ', \t\treg: /^\\w+$/},\r\n\t\t\t// {id: 9, title: 'ГОК', \t\treg: /^\\w+$/},\r\n\t\t\t// {id: 10, title: 'ЗОУИТ', \treg: /^\\w+$/}\r\n\t\t\t// /[^\\d\\:]/g,\r\n\t\t\t// /\\d\\d:\\d+$/,\r\n\t\t\t// /\\d\\d:\\d+:\\d+$/,\r\n\t\t\t// /\\d\\d:\\d+:\\d+:\\d+$/\r\n\t\t];\r\n    }    \r\n    getCadastreLayer (str, type) {\r\n        str = str.trim();\r\n        for (var i = 0, len = this._cadastreLayers.length; i < len; i++) {\r\n            var it = this._cadastreLayers[i];\r\n            if (it.id === type) { return it; }\r\n            if (it.reg.exec(str)) { return it; }\r\n        }\r\n        return null;\r\n    }\r\n    find(value, limit, strong, retrieveGeometry){       \r\n        return new Promise(resolve => {\r\n            let req = new Request(`${this._serverBase}/typeahead?limit=${limit}&skip=0&text=${value}`);\r\n            let headers = new Headers();\r\n            headers.append('Content-Type','application/json');\r\n            let init = {\r\n                method: 'GET',            \r\n                mode: 'cors',\r\n                cache: 'default',\r\n            };\r\n            fetch (req, init)\r\n            .then(response => response.text())\r\n            .then(response => {\r\n                const json = JSON.parse (response); \r\n                if(json.status === 200){\r\n                    let rs = json.results.map(x => {\r\n                        return {\r\n                            name: x.title,\r\n                            properties: x,\r\n                            provider: this,\r\n                            query: value,\r\n                        };\r\n                    });\r\n                    resolve(rs);\r\n                }\r\n                else {\r\n                    resolve(json);\r\n                }                                       \r\n                                    \r\n            });\r\n        });\r\n    }\r\n    fetch(obj) {        \r\n        const cadastreLayer = this.getCadastreLayer(obj.value);\r\n        return new Promise(resolve => {\r\n            if(cadastreLayer) {\r\n                let req = new Request(`${this._serverBase}/features/${cadastreLayer.id}?tolerance=${this._tolerance}&limit=1&text=${obj.value}`);\r\n                let headers = new Headers();\r\n                headers.append('Content-Type','application/json');\r\n                let init = {\r\n                    method: 'GET',            \r\n                    mode: 'cors',\r\n                    cache: 'default',\r\n                };\r\n                fetch (req, init)\r\n                .then(response => response.text())\r\n                .then(response => {\r\n                    const json = JSON.parse (response);\r\n                    if(json.status === 200){\r\n                        if (typeof this._onFetch === 'function'){\r\n                            this._onFetch(json);\r\n                        }\r\n                        let rs = json.features.map(x => {\r\n                            return {\r\n                                name: x.attrs.name,\r\n                                properties: x,\r\n                                provider: this,\r\n                                query: obj,\r\n                            };\r\n                            \r\n                        });\r\n                        resolve(rs);\r\n\r\n                    }\r\n                    else {\r\n                        resolve(json);\r\n                    }\r\n                    \r\n                    \r\n                });\r\n            }\r\n            else {\r\n                resolve([]);\r\n            }            \r\n        });\r\n    }\r\n}\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.CadastreDataProvider = CadastreDataProvider;\r\n\r\nexport { CadastreDataProvider };\n\n\n// WEBPACK FOOTER //\n// ./E:/projects/Leaflet.ExtSearch/src/DataProviders/CadastreDataProvider.js"],"sourceRoot":""}