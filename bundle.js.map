{"version":3,"sources":["webpack:///webpack/bootstrap 63c1bf928fabde63317d","webpack:///./src/SearchControl.js","webpack:///./src/SearchControl.css","webpack:///./src/ResultView.js","webpack:///./src/GmxRenderer.js","webpack:///./external/gmxDrawing/dist/gmxDrawing-min.js","webpack:///./external/gmxDrawing/dist/css/gmxDrawing.css","webpack:///./src/OsmDataProvider.js"],"names":["SearchControl","L","Control","extend","includes","Mixin","Events","initialize","options","setOptions","_handleChange","e","_input","value","length","Promise","all","providers","map","p","find","then","entries","values","filter","x","provider","showSuggestion","results","show","_handleMouseMove","stopPropagation","_selectItem","renderOptions","editable","pointStyle","size","weight","opacity","color","lineStyle","fill","detail","fetch","properties","response","items","_renderer","render","onAdd","_container","DomUtil","create","innerHTML","querySelector","DomEvent","on","bind","input","document","addEventListener","renderer","window","nsGmx","ResultView","index","count","_item","_list","setAttribute","style","top","offsetTop","offsetHeight","left","offsetLeft","handleKey","handleWheel","parentElement","appendChild","key","preventDefault","item","focus","complete","i","_items","text","ObjName","setSelectionRange","hide","event","CustomEvent","bubbles","cancelable","dispatchEvent","reduce","a","z","concat","html","ObjNameShort","join","querySelectorAll","selectItem","display","GmxRenderer","_map","_gmxDrawing","GmxDrawing","feature","layer","GeoJSON","geometryToLayer","geometry","add","addTo","type","coords","coordinates","setView","latLng","bounds","getBounds","fitBounds","invalidateSize","t","Class","current","gmxUtil","prettifyDistance","createElementNS","Path","SVG_NS","addClass","setAttributeNS","n","o","testProp","hideTooltip","showTooltip","s","l","y","textContent","getAttributeNS","_pathRoot","getComputedTextLength","_drawMode","mode","bringToFront","addGeoJSON","geoJson","getLayers","setStyle","_originalStyle","push","r","layerGroup","eachLayer","Feature","Rectangle","Polygon","MultiPolygon","Polyline","MultiPolyline","Marker","draggable","_chkDrawOptions","markerStyle","iconStyle","pointToLayer","icon","addLayer","_addItem","setEditMode","_disableDrag","dragging","disable","disableTextSelection","disableImageDrag","doubleClickZoom","removeHooks","_enableDrag","enable","enableTextSelection","enableImageDrag","addHooks","_clearCreate","_createKey","Browser","mobile","off","fn","eventName","utils","defaultStyles","holeStyle","iconUrl","iconAnchor","iconSize","popupAnchor","shadowSize","_initPathRoot","_createType","latlng","h","originalEvent","ctrlKey","shiftKey","altKey","marker","rectangle","latLngBounds","lat","lng","_startTouchMove","_pointDown","rings","ring","_drawstop","polygon","setAddMode","polyline","_mapPane","fire","extendDefaultStyles","getFeatures","loadState","featureCollection","onEachFeature","popupOpened","getLatLng","openPopup","saveState","featureGroup","toGeoJSON","getNotDefaults","hasLayer","getPopup","_obj","Object","keys","features","version","object","_removeItem","splice","clear","removeLayer","remove","Map","addInitHook","gmxDrawing","ContextMenu","PointMarkers","include","LayerGroup","simplify","setLatLngs","points","getPathLatLngs","holes","invoke","bringToBack","prototype","call","_parent","setTimeout","_fireEvent","onRemove","hole","removeClass","getStyle","_drawOptions","_setStyleOptions","enableEdit","disableEdit","redraw","_setLinesStyle","_setPointsStyle","getOptions","_latLngsToCoords","latLngsToCoords","_latlngsAddShift","getShiftLatlng","getPixelOffset","shiftPixel","tileSizes","_zoom","Point","Math","floor","_dx","_dy","setOffsetToGeometry","getLatLngs","setPositionOffset","_getCoords","_toGeoJSON","_getLastObject","getFeature","getType","hideFill","_fill","showFill","clearLayers","fillColor","LatLngBounds","_getBounds","_layers","_initialize","removeEditMode","getArea","geoJSONGetArea","getLength","geoJSONGetLength","getSummary","distanceUnit","prettifyArea","squareUnit","formatCoordinates","Ring","_latlngs","_holes","_showTooltip","g","gmxLocale","getText","d","buttons","button","downObject","layerPoint","getDownType","c","num","u","_setMarker","bindPopup","maxWidth","closeOnClick","maxPopupCount","popup","_contentNode","title","width","split","cols","forEach","rows","update","_popup","setLatLng","_latlng","delta","_isOpen","className","shape","fillOpacity","_activeZIndex","activeZIndex","_notActiveZIndex","notActiveZIndex","_coords","_legLength","lines","lineType","indexOf","noClip","clickable","addLatLng","_pointUp","removeAddMode","distVincenty","_setPoint","equals","setPosition","ie","gtIE11","_draggable","_onUp","_onDragStart","which","_lastDownTime","Date","now","down","disableAddPoints","_pointMove","_clearLineAddPoint","_moved","target","_leaflet_pos","test","getMarkerByPos","_skipClick","_lastPointClickTime","_removePoint","_lineAddPointID","clearTimeout","_pointDblClick","_lastAddTime","_pointClick","end","reverse","_onDragEnd","_onDrag","_dragstartPoint","touches","_editHandlers","touchstart","touchstartFill","_EditOpacity","_createHandlers","_mouseDown","_mouseUp","_moseMove","_lastMouseDownTime","smoothFactor","_parts","abs","_getPathPartStr","VML","_round","f","_onMouseClick","_fireMouseEvent","_isPathChange","projectLatlngs","getPathString","_pathStr","_updatePath","_clipPoints","_path","getAttribute","dashArray","lineCap","lineJoin","stroke","alt","keyboard","zIndexOffset","riseOffset","riseOnHover","latLngToLayerPoint","_add","layerPointToLatLng","mouseEventToContainerPoint","containerPointToLayerPoint","_originalPoints","Bounds","point","_","m","contains","LineUtil","pointToSegmentDistance","shift","_icon","OsmDataProvider","serverBase","limit","_serverBase","_limit","_convertGeometry","_key","KOSMOSNIMKI_SESSION_KEY","toUpperCase","obj","query","ObjCode","TypeCode","req","Request","headers","Headers","append","init","method","cache","resolve","reject","json","JSON","parse","slice","Status","rs","Result","SearchResult","Geometry","props","k","request","encodeURIComponent"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 63c1bf928fabde63317d","import './SearchControl.css';\r\nimport { ResultView } from './ResultView.js';\r\nimport { GmxRenderer } from './GmxRenderer.js';\r\nimport { OsmDataProvider } from './OsmDataProvider.js';\r\n\r\nlet SearchControl = L.Control.extend({\r\n    includes: [L.Mixin.Events],\r\n    initialize: function(options) {    \r\n        L.setOptions(this, options);        \r\n    },   \r\n    _handleChange: function(e){\r\n        if(this._input.value.length > 2){\r\n            Promise\r\n            .all(this.options.providers.map(p => p.find(this._input.value)))\r\n            .then(values => {\r\n                const entries = values.filter(x => x.provider.showSuggestion);\r\n                this.results.show(entries);\r\n            });\r\n        }        \r\n    },\r\n    _handleMouseMove: function(e){\r\n        e.stopPropagation();\r\n    },\r\n    _selectItem: function(e){\r\n        const renderOptions = {\r\n            editable: false,\r\n            map: true,\r\n            pointStyle: {\r\n                size: 8,\r\n                weight: 1,\r\n                opacity: 1,\r\n                color: '#00008B'\r\n            },\r\n            lineStyle: {\r\n                fill: false,\r\n                weight: 2,\r\n                opacity: 1,\r\n                color: '#00008B'\r\n            }\r\n        };\r\n        e.detail.provider.fetch (e.detail.properties).then(response => {\r\n            if(response.items.length > 0){\r\n                this._renderer.render(response.items[0], renderOptions);\r\n            }\r\n        });        \r\n    },\r\n    onAdd: function(map) {\r\n        this._container = L.DomUtil.create('div', 'leaflet-ext-search');\r\n        this._container.innerHTML = '<input type=\"text\" value=\"\" />';\r\n        this._input = this._container.querySelector('input');\r\n\r\n        L.DomEvent.on(this._input, 'input', this._handleChange.bind(this));\r\n        L.DomEvent.on(this._input, 'mousemove', this._handleMouseMove.bind(this));        \r\n\r\n        this.results = new ResultView({input: this._input});\r\n        document.addEventListener('item:select', this._selectItem.bind(this));\r\n\r\n        this._renderer = this.options.renderer || new GmxRenderer(map);\r\n\r\n        return this._container;\r\n    }\r\n});\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.SearchControl = SearchControl; \r\n\r\nexport { SearchControl };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/SearchControl.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/SearchControl.css\n// module id = 1\n// module chunks = 0","class ResultView {\r\n    constructor({input}){\r\n        this._input = input;\r\n        this.index = -1;\r\n        this.count = 0;\r\n        this._item = null;\r\n\r\n        this._list = L.DomUtil.create('div');\r\n        this._list.setAttribute('class', 'leaflet-ext-search-list noselect');        \r\n\r\n        this._list.style.top = `${this._input.offsetTop + this._input.offsetHeight + 2}px`;\r\n        this._list.style.left = `${this._input.offsetLeft}px`;\r\n        this._input.addEventListener('keydown', this.handleKey.bind(this));\r\n        this._list.addEventListener('keydown', this.handleKey.bind(this));\r\n        this._list.addEventListener('wheel', this.handleWheel.bind(this));\r\n        this._input.parentElement.appendChild(this._list);        \r\n    }\r\n\r\n    handleWheel (e) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    handleKey(e){                         \r\n        if(e.key === 'ArrowDown'){\r\n            e.preventDefault();            \r\n            if (this.index < 0){\r\n                this.index = 0;\r\n            }\r\n            else if (0 <= this.index && this.index < this.count - 1){\r\n                ++this.index;\r\n            }   \r\n            else {\r\n                this.index = this.count - 1;\r\n            }            \r\n            let item = this._list.querySelector(`[tabindex=\"${this.index}\"]`);\r\n            item.focus();            \r\n        }\r\n        else if (e.key === 'ArrowUp'){\r\n            e.preventDefault();            \r\n            if(this.index > 0){\r\n                --this.index;                \r\n                let item = this._list.querySelector(`[tabindex=\"${this.index}\"]`);        \r\n                item.focus();                                              \r\n            }\r\n            else {\r\n                this.index = -1;                \r\n                this._input.focus();                \r\n            }            \r\n        }\r\n        else if (e.key === 'Enter'){\r\n            this.complete (this.index);            \r\n        }    \r\n    }\r\n\r\n    selectItem(i, e){\r\n        this._item = this._items[i];        \r\n        const text = this._item.properties.ObjName;\r\n        this._input.value = text;        \r\n        this._input.setSelectionRange(text.length, text.length);        \r\n    }\r\n\r\n    complete(i, e){\r\n        let item = i >= 0 ? this._items[i] : this._item ? this._item : null;\r\n        if(item) {\r\n            this._item = item;        \r\n            this.index = -1;            \r\n            const text = item.properties.ObjName;\r\n            this._input.value = text;\r\n            this._input.setSelectionRange(text.length, text.length);                          \r\n            this._input.focus();\r\n            this.hide();\r\n            let event = new CustomEvent('item:select', {detail: item, bubbles: true, cancelable: true});\r\n            document.dispatchEvent(event);            \r\n        }\r\n    }\r\n\r\n    show(entries) {\r\n        this._item = null;\r\n        this.index = -1;\r\n\r\n        this._items = entries.reduce((a,x) => {\r\n            const items = x.items.map(z => {\r\n                return {provider: x.provider, properties: z};\r\n            });\r\n            return a.concat(items);\r\n        }, []);   \r\n        const html = \r\n            '<ul>' + this._items         \r\n            .map((x,i) => {\r\n                return `<li tabindex=${i}>${x.properties.ObjNameShort}</li>`;                \r\n            }, []).join('') + '</ul>';                            \r\n\r\n        this._list.innerHTML = html;\r\n        let items = this._list.querySelectorAll('li');\r\n        for (let i = 0; i < items.length; ++i){\r\n            let item = items[i];\r\n            item.addEventListener('click', this.complete.bind(this, i));\r\n            item.addEventListener('focus', this.selectItem.bind(this, i));            \r\n        }\r\n        \r\n        this.count = items.length;\r\n        this._list.style.display = 'block';\r\n    }\r\n    hide() {        \r\n        this._list.style.display = 'none';                \r\n    }\r\n\r\n}\r\n\r\nexport { ResultView };\n\n\n// WEBPACK FOOTER //\n// ./src/ResultView.js","import '../external/gmxDrawing/dist/gmxDrawing-min.js';\r\nimport '../external/gmxDrawing/dist/css/gmxDrawing.css';\r\n\r\nclass GmxRenderer {\r\n    constructor(map){\r\n        this._map = map;\r\n        this._gmxDrawing = new L.GmxDrawing ();\r\n        this._gmxDrawing.initialize(map);        \r\n    }\r\n    render(feature, options){\r\n        let layer = L.GeoJSON.geometryToLayer(feature.geometry);        \r\n        this._gmxDrawing.add(layer, options).addTo(this._map);\r\n        if(feature.geometry.type === 'Point'){\r\n            let coords = feature.geometry.coordinates;\r\n            this._map.setView(L.latLng(coords[1], coords[0]), 14);            \r\n        }\r\n        else {\r\n            let bounds = layer.getBounds();\r\n            this._map.fitBounds(bounds);\r\n        }\r\n        \r\n        this._map.invalidateSize();\r\n    }\r\n}\r\n\r\nexport { GmxRenderer };\n\n\n// WEBPACK FOOTER //\n// ./src/GmxRenderer.js","!function(){var t=1e-7,e=\"1.0.0\";L.GmxDrawing=L.Class.extend({options:{type:\"\"},includes:L.Mixin.Events,initialize:function(t){if(this._map=t,this.items=[],this.current=null,L.gmxUtil&&L.gmxUtil.prettifyDistance){var e=document.createElementNS(L.Path.SVG_NS,\"g\");L.DomUtil.addClass(e,\"gmxTooltip\");var i=document.createElementNS(L.Path.SVG_NS,\"rect\");i.setAttributeNS(null,\"rx\",4),i.setAttributeNS(null,\"ry\",4),i.setAttributeNS(null,\"height\",16),L.DomUtil.addClass(i,\"gmxTooltipBG\");var n=document.createElementNS(L.Path.SVG_NS,\"text\"),o=L.DomUtil.testProp([\"userSelect\",\"WebkitUserSelect\",\"OUserSelect\",\"MozUserSelect\",\"msUserSelect\"]);n.style[o]=\"none\",e.appendChild(i),e.appendChild(n),this.hideTooltip=function(){e.setAttributeNS(null,\"visibility\",\"hidden\")},this.showTooltip=function(t,o){var s=t.x+11,l=t.y-14;n.setAttributeNS(null,\"x\",s),n.setAttributeNS(null,\"y\",l),n.textContent=o,\"visible\"!==e.getAttributeNS(null,\"visibility\")&&(this._map._pathRoot.appendChild(e),e.setAttributeNS(null,\"visibility\",\"visible\"));var a=n.getComputedTextLength();i.setAttributeNS(null,\"width\",a+8),i.setAttributeNS(null,\"x\",s-4),i.setAttributeNS(null,\"y\",l-12)}}var s=function(t){this._drawMode=t.mode};this.on(\"drawstop drawstart\",s)},bringToFront:function(){for(var t=0,e=this.items.length;e>t;t++){var i=this.items[t];i._map&&\"bringToFront\"in i&&i.bringToFront()}},addGeoJSON:function(t,e){var i=[],n=t instanceof L.GeoJSON;if(n||(t=L.geoJson(t,e)),t instanceof L.GeoJSON){var o=t.getLayers();if(o)for(var s=function(t){var n=null;if(t.setStyle&&e&&e.lineStyle){n={};for(var o in e.lineStyle)n[o]=e.lineStyle[o];t.setStyle(e.lineStyle)}var s=this.add(t,e);s._originalStyle=n,i.push(s)},l=0,a=o.length;a>l;l++){var r=o[l];\"GeometryCollection\"!==r.feature.geometry.type&&(r=L.layerGroup([r])),r.eachLayer(s,this)}}return i},add:function(t,e){var i=null;if(t){if(t instanceof L.GmxDrawing.Feature)i=t;else{var n={};if(e&&\"editable\"in e||(n.editable=!0),t.geometry?n.type=t.geometry.type:t instanceof L.Rectangle?n.type=\"Rectangle\":t instanceof L.Polygon?n.type=\"Polygon\":t instanceof L.MultiPolygon?n.type=\"MultiPolygon\":t instanceof L.Polyline?n.type=\"Polyline\":t instanceof L.MultiPolyline?n.type=\"MultiPolyline\":t instanceof L.Marker&&(n.type=\"Point\",n.editable=!1,t.options.draggable=!0),e=this._chkDrawOptions(n.type,e),L.extend(e,n),t.geometry){var o=e.markerStyle&&e.markerStyle.iconStyle;return\"Point\"===e.type&&!e.pointToLayer&&o&&(e.icon=L.icon(o),e.pointToLayer=function(t,i){return new L.Marker(i,e)}),this.addGeoJSON(t,e)}i=new L.GmxDrawing.Feature(this,t,e)}\"map\"in e||(e.map=!0),e.map&&!i._map?this._map.addLayer(i):this._addItem(i),\"setEditMode\"in i&&i.setEditMode()}return i},_disableDrag:function(){this._map.dragging.disable(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._map.doubleClickZoom.removeHooks()},_enableDrag:function(){this._map.dragging.enable(),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),this._map.doubleClickZoom.addHooks()},_clearCreate:function(){this._createKey&&(\"Rectangle\"===this._createKey.type&&L.Browser.mobile?L.DomEvent.off(this._map._container,\"touchstart\",this._createKey.fn,this):this._map.off(this._createKey.eventName,this._createKey.fn,this),this._enableDrag()),this._createKey=null},_chkDrawOptions:function(t,e){var i=L.GmxDrawing.utils.defaultStyles,n={};if(e||(e=L.extend({},i)),\"Point\"===t?L.extend(n,i.markerStyle.options.icon,e):(L.extend(n,e),n.lineStyle=L.extend({},i.lineStyle,e.lineStyle),n.pointStyle=L.extend({},i.pointStyle,e.pointStyle),n.holeStyle=L.extend({},i.holeStyle,e.holeStyle)),n.iconUrl){var o={iconUrl:n.iconUrl};delete n.iconUrl,n.iconAnchor&&(o.iconAnchor=n.iconAnchor,delete n.iconAnchor),n.iconSize&&(o.iconSize=n.iconSize,delete n.iconSize),n.popupAnchor&&(o.popupAnchor=n.popupAnchor,delete n.popupAnchor),n.shadowSize&&(o.shadowSize=n.shadowSize,delete n.shadowSize),n.markerStyle={iconStyle:o}}return n},create:function(e,i){if(this._clearCreate(null),e){var n=this._map,o=this._chkDrawOptions(e,i),s=this;\"Rectangle\"===e&&(n._initPathRoot(),n.dragging.disable()),this._createKey={type:e,eventName:\"Rectangle\"===e?L.Browser.mobile?\"touchstart\":\"mousedown\":\"click\",fn:function(i){s._createType=\"\";var n,l,a={},r=i.latlng;for(l in o)l in L.GmxDrawing.utils.defaultStyles||(a[l]=o[l]);if(\"Point\"===e){var h=o.markerStyle||{},p={draggable:!0};i&&i.originalEvent&&(p.ctrlKey=i.originalEvent.ctrlKey,p.shiftKey=i.originalEvent.shiftKey,p.altKey=i.originalEvent.altKey),h.iconStyle&&(p.icon=L.icon(h.iconStyle)),n=s.add(L.marker(r,p),a)}else o.pointStyle&&(a.pointStyle=o.pointStyle),o.lineStyle&&(a.lineStyle=o.lineStyle),\"Rectangle\"===e?(a.mode=\"edit\",n=s.add(L.rectangle(L.latLngBounds(L.latLng(r.lat+t,r.lng-t),r)),a),L.Browser.mobile?n._startTouchMove(i,!0):n._pointDown(i),n.rings[0].ring._drawstop=!0):\"Polygon\"===e?(a.mode=\"add\",n=s.add(L.polygon([r]),a),n.setAddMode()):\"Polyline\"===e&&(a.mode=\"add\",n=s.add(L.polyline([r]),a).setAddMode());s._clearCreate()}},\"Rectangle\"===e&&L.Browser.mobile?L.DomEvent.on(n._container,\"touchstart\",this._createKey.fn,this):n.on(this._createKey.eventName,this._createKey.fn,this),this._createType=e,L.DomUtil.addClass(n._mapPane,\"leaflet-clickable\"),this.fire(\"drawstart\",{mode:e})}this.options.type=e},extendDefaultStyles:function(t){var e=L.GmxDrawing.utils.defaultStyles;if(t=t||{},t.iconUrl){var i=e.markerStyle.options.icon;i.iconUrl=t.iconUrl,delete t.iconUrl,t.iconAnchor&&(i.iconAnchor=t.iconAnchor,delete t.iconAnchor),t.iconSize&&(i.iconSize=t.iconSize,delete t.iconSize),t.popupAnchor&&(i.popupAnchor=t.popupAnchor,delete t.popupAnchor),t.shadowSize&&(i.shadowSize=t.shadowSize,delete t.shadowSize)}return t.lineStyle&&(L.extend(e.lineStyle,t.lineStyle),delete t.lineStyle),t.pointStyle&&(L.extend(e.pointStyle,t.pointStyle),delete t.pointStyle),t.holeStyle&&(L.extend(e.holeStyle,t.holeStyle),delete t.holeStyle),L.extend(e,t),this},getFeatures:function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e]);return t},loadState:function(t){var e=this,i=t.featureCollection;L.geoJson(i,{onEachFeature:function(t,i){var n=t.properties,o=n.popupOpened;if(\"Rectangle\"===n.type)i=L.rectangle(i.getBounds());else if(\"Point\"===n.type){n=n.options;var s=n.icon;s&&(delete n.icon,s.iconUrl&&(n.icon=L.icon(s))),i=L.marker(i.getLatLng(),n)}i.setStyle&&n&&n.lineStyle&&i.setStyle(n.lineStyle),e.add(i,n),o&&i.openPopup()}})},saveState:function(){for(var t=L.featureGroup(),i=[],n=0,o=this.items.length;o>n;n++){var s=this.items[n];if(\"Point\"===s.options.type){var l=s.toGeoJSON();l.properties=L.GmxDrawing.utils.getNotDefaults(s.options,L.GmxDrawing.utils.defaultStyles.markerStyle),s._map?s._map.hasLayer(s.getPopup())&&(l.properties.popupOpened=!0):l.properties.map=!1;var a=L.GmxDrawing.utils.getNotDefaults(s._obj.options,L.GmxDrawing.utils.defaultStyles.markerStyle.options);Object.keys(a).length&&(l.properties.options=a),a=L.GmxDrawing.utils.getNotDefaults(s._obj.options.icon.options,L.GmxDrawing.utils.defaultStyles.markerStyle.options.icon),Object.keys(a).length&&(l.properties.options||(l.properties.options={}),l.properties.options.icon=a),i.push(l)}else t.addLayer(s)}var r=t.toGeoJSON();return r.features=r.features.concat(i),{version:e,featureCollection:r}},_addItem:function(t){for(var e=!0,i=0,n=this.items.length;n>i;i++){var o=this.items[i];if(o===t){e=!1;break}}e&&this.items.push(t),this.fire(\"add\",{mode:t.mode,object:t})},_removeItem:function(t,e){for(var i=0,n=this.items.length;n>i;i++){var o=this.items[i];if(o===t){if(e){this.items.splice(i,1);var s={type:o.options.type,mode:o.mode,object:o};this.fire(\"remove\",s),o.fire(\"remove\",s)}return o}}return null},clear:function(){for(var t=0,e=this.items.length;e>t;t++){var i=this.items[t];i&&i._map&&i._map.removeLayer(i);var n={type:i.options.type,mode:i.mode,object:i};this.fire(\"remove\",n),i.fire(\"remove\",n)}return this.items=[],this},remove:function(t){var e=this._removeItem(t,!0);return e&&e._map&&e._map.removeLayer(e),e}}),L.Map.addInitHook(function(){this.gmxDrawing=new L.GmxDrawing(this),L.Mixin.ContextMenu&&L.GmxDrawing.PointMarkers.include(L.Mixin.ContextMenu)})}(),L.GmxDrawing.Feature=L.LayerGroup.extend({options:{mode:\"\"},includes:L.Mixin.Events,simplify:function(){var t,e,i,n,o;for(t=0,i=this.rings.length;i>t;t++){var s=this.rings[t],l=s.ring;for(l.setLatLngs(l.points.getPathLatLngs()),e=0,n=s.holes.length;n>e;e++)o=s.holes[e],o.setLatLngs(o.points.getPathLatLngs())}return this},bringToFront:function(){return this.invoke(\"bringToFront\")},bringToBack:function(){return this.invoke(\"bringToBack\")},onAdd:function(t){if(L.LayerGroup.prototype.onAdd.call(this,t),this._parent._addItem(this),\"Point\"===this.options.type){t.addLayer(this._obj);var e=this;setTimeout(function(){e._fireEvent(\"drawstop\",e._obj.options)},0)}this._fireEvent(\"addtomap\")},onRemove:function(t){\"hideTooltip\"in this&&this.hideTooltip(),L.LayerGroup.prototype.onRemove.call(this,t),\"Point\"===this.options.type&&t.removeLayer(this._obj),this._fireEvent(\"removefrommap\")},remove:function(t){if(t){var e,i,n,o,s;for(e=0,n=this.rings.length;n>e;e++)if(t.options.hole){for(i=0,o=this.rings[e].holes.length;o>i;i++)if(s=this.rings[e].holes[i],t===s){this.rings[e].holes.splice(i,1),s._map&&s._map.removeLayer(s);break}if(!t._map)break}else if(t===this.rings[e].ring){for(i=0,o=this.rings[e].holes.length;o>i;i++)s=this.rings[e].holes[i],s._map&&s._map.removeLayer(s);this.rings.splice(e,1),t._map&&t._map.removeLayer(t);break}}else this.rings=[];return this.rings.length<1&&(this._originalStyle&&this._obj.setStyle(this._originalStyle),this._parent.remove(this)),this},_fireEvent:function(t){if(!(\"removefrommap\"===t&&this.rings.length>1)){var e={mode:this.mode||\"\",object:this};this.fire(t,e),this._parent.fire(t,e),\"drawstop\"===t&&this._map&&L.DomUtil.removeClass(this._map._mapPane,\"leaflet-clickable\")}},getStyle:function(){var t=L.extend({},this._drawOptions);return delete t.holeStyle,\"Point\"===t.type&&(L.extend(t,t.markerStyle.iconStyle),delete t.markerStyle),t},setOptions:function(t){return t.lineStyle&&this._setStyleOptions(t.lineStyle,\"lines\"),t.pointStyle&&this._setStyleOptions(t.pointStyle,\"points\"),\"editable\"in t&&(t.editable?this.enableEdit():this.disableEdit()),L.setOptions(this,t),this._fireEvent(\"optionschange\"),this},_setStyleOptions:function(t,e){for(var i=0,n=this.rings.length;n>i;i++){var o=this.rings[i].ring[e];o.setStyle(t),o.redraw();for(var s=0,l=this.rings[i].holes.length;l>s;s++)o=this.rings[i].holes[s][e],o.setStyle(t),o.redraw()}this._fireEvent(\"stylechange\")},_setLinesStyle:function(t){this._setStyleOptions(t,\"lines\")},_setPointsStyle:function(t){this._setStyleOptions(t,\"points\")},getOptions:function(){var t=this.options,e=L.extend({},t);e.lineStyle=t.lineStyle,e.pointStyle=t.pointStyle;var i=L.GmxDrawing.utils.getNotDefaults(e,L.GmxDrawing.utils.defaultStyles);if(Object.keys(i.lineStyle).length||delete i.lineStyle,Object.keys(i.pointStyle).length||delete i.pointStyle,this._map||(i.map=!1),\"Point\"===t.type){var n=L.GmxDrawing.utils.getNotDefaults(this._obj.options,L.GmxDrawing.utils.defaultStyles.markerStyle.options);Object.keys(n).length&&(i.options=n),n=L.GmxDrawing.utils.getNotDefaults(this._obj.options.icon.options,L.GmxDrawing.utils.defaultStyles.markerStyle.options.icon),Object.keys(n).length&&(i.options.icon=n)}return i},_latLngsToCoords:function(t,e){var i=L.GeoJSON.latLngsToCoords(t);if(e){var n=i[i.length-1];(n[0]!==i[0][0]||n[1]!==i[0][1])&&i.push(i[0])}return i},_latlngsAddShift:function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)i.push(L.GmxDrawing.utils.getShiftLatlng(t[n],this._map,e));return i},getPixelOffset:function(){var t=this.shiftPixel;if(!t&&this._map){var e=256/L.gmxUtil.tileSizes[this._map._zoom];t=this.shiftPixel=new L.Point(Math.floor(e*this._dx),-Math.floor(e*this._dy))}return t||new L.Point(0,0)},setOffsetToGeometry:function(t,e){var i,n,o,s,l,a,r=256/L.gmxUtil.tileSizes[this._map._zoom],h=new L.Point(r*(this._dx||t||0),-r*(this._dy||e||0));for(i=0,n=this.rings.length;n>i;i++){var p=this.rings[i];if(l=p.ring,a=l.points.getLatLngs(),l.setLatLngs(this._latlngsAddShift(a,h)),p.holes&&p.holes.length)for(o=0,s=p.holes.length;s>o;o++)l=p.holes[o].ring,a=l.points.getLatLngs(),l.setLatLngs(this._latlngsAddShift(a,h))}return this.setPositionOffset(),this},setPositionOffset:function(t,e){if(this._dx=t||0,this._dy=e||0,this._map){this.shiftPixel=null;for(var i=this.getPixelOffset(),n=0,o=this.rings.length;o>n;n++){this.rings[n].ring.setPositionOffset(i);for(var s=0,l=this.rings[n].holes.length;l>s;s++)this.rings[n].holes[s].setPositionOffset(i)}}},_getCoords:function(t){for(var e=this.options.type,i=\"Polygon\"===e||\"Rectangle\"===e||\"MultiPolygon\"===e,n=t?null:this.shiftPixel,o=[],s=0,l=this.rings.length;l>s;s++){var a=this.rings[s],r=this._latLngsToCoords(a.ring.points.getLatLngs(),i,n);if(i&&(r=[r]),a.holes&&a.holes.length)for(var h=0,p=a.holes.length;p>h;h++)r.push(this._latLngsToCoords(a.holes[h].points.getLatLngs(),i,n));o.push(r)}return(\"Polyline\"===e||i&&\"MultiPolygon\"!==e)&&(o=o[0]),o},toGeoJSON:function(){return this._toGeoJSON(!0)},_toGeoJSON:function(t){var e,i=this.options.type,n=this.getOptions();if(delete n.mode,!this.options.editable||\"Point\"===i){var o=this._obj;o instanceof L.GeoJSON&&(o=L.GmxDrawing.utils._getLastObject(o).getLayers()[0]);var s=o.toGeoJSON();return s.properties=n,s}return this.rings&&(e=this._getCoords(t),\"Rectangle\"===i?i=\"Polygon\":\"Polyline\"===i?i=\"LineString\":\"MultiPolyline\"===i&&(i=\"MultiLineString\")),L.GeoJSON.getFeature({feature:{type:\"Feature\",properties:n}},{type:i,coordinates:e})},getType:function(){return this.options.type},hideFill:function(){this._fill._map&&this._map.removeLayer(this._fill)},showFill:function(){var t=this.toGeoJSON(),e=L.GeoJSON.geometryToLayer(t,null,null,{weight:0});return this._fill.clearLayers(),e instanceof L.LayerGroup?e.eachLayer(function(t){this._fill.addLayer(t)},this):(e.setStyle({weight:0,fill:!0,fillColor:\"#0033ff\"}),this._fill.addLayer(e)),this._fill._map||(this._map.addLayer(this._fill),this._fill.bringToBack()),this},getBounds:function(){var t=new L.LatLngBounds;if(\"Point\"===this.options.type){var e=this._obj.getLatLng();t.extend(e)}else t=this._getBounds();return t},_getBounds:function(t){var e,i=t||this,n=new L.LatLngBounds;return i instanceof L.LayerGroup?(i.eachLayer(function(t){e=this._getBounds(t),n.extend(e)},this),n):(e=i instanceof L.Marker?i.getLatLng():i.getBounds(),n.extend(e),n)},initialize:function(t,e,i){i=i||{},i.mode=\"\",this._drawOptions=L.extend({},i);var n=i.type;\"Point\"===n?(delete i.pointStyle,delete i.lineStyle):(delete i.iconUrl,delete i.iconAnchor,delete i.iconSize,delete i.popupAnchor,delete i.shadowSize,delete i.markerStyle),delete i.holeStyle,L.setOptions(this,i),this._layers={},this._obj=e,this._parent=t,this._dx=0,this._dy=0,this._initialize(t,e)},enableEdit:function(){this.options.mode=\"edit\";var t=this.options.type;if(\"Point\"!==t){for(var e=0,i=this.rings.length;i>e;e++){var n=this.rings[e];n.ring.options.editable=this.options.editable,n.ring.setEditMode();for(var o=0,s=n.holes.length;s>o;o++){var l=n.holes[o];l.options.editable=this.options.editable,l.setEditMode()}}var a=L.geoJson(this.toGeoJSON());this.options.editable=!0,this._initialize(this._parent,a)}return this},disableEdit:function(){var t=this.options.type;if(\"Point\"!==t){this._originalStyle=this.options.lineStyle;for(var e=L.geoJson(this.toGeoJSON().geometry,this._originalStyle).getLayers()[0],i=0,n=this.rings.length;n>i;i++){var o=this.rings[i];o.ring.removeEditMode(),o.ring.options.editable=!1;for(var s=0,l=o.holes.length;l>s;s++){var a=o.holes[s];a.removeEditMode(),a.options.editable=!1}}this._obj=e,this.options.editable=!1,this._initialize(this._parent,this._obj)}return this},getArea:function(){var t=0;return L.gmxUtil.geoJSONGetArea&&(t=L.gmxUtil.geoJSONGetArea(this.toGeoJSON())),t},getLength:function(){var t=0;return L.gmxUtil.geoJSONGetLength&&(t=L.gmxUtil.geoJSONGetLength(this.toGeoJSON())),t},getSummary:function(){var t=\"\",e=this._map.options||{},i=this.options.type;if(\"Polyline\"===i||\"MultiPolyline\"===i)t=L.gmxUtil.prettifyDistance(this.getLength(),e.distanceUnit);else if(\"Polygon\"===i||\"MultiPolygon\"===i||\"Rectangle\"===i)t=L.gmxUtil.prettifyArea(this.getArea(),e.squareUnit);else if(\"Point\"===i){var n=this._obj.getLatLng();t=L.gmxUtil.formatCoordinates(n)}return t},_initialize:function(t,e){if(this.clearLayers(),this.rings=[],this.mode=\"\",this._fill=L.featureGroup(),this.options.editable){for(var i=e.getLayers?L.GmxDrawing.utils._getLastObject(e).getLayers():[e],n=0,o=i.length;o>n;n++){var s=i[n],l=[],a=new L.GmxDrawing.Ring(this,s._latlngs,{ring:!0,editable:this.options.editable});if(this.addLayer(a),s._holes)for(var r=0,h=s._holes.length;h>r;r++){var p=new L.GmxDrawing.Ring(this,s._holes[r],{hole:!0,editable:this.options.editable});this.addLayer(p),l.push(p)}this.rings.push({ring:a,holes:l})}if(L.gmxUtil&&L.gmxUtil.prettifyDistance&&!this._showTooltip){var g=function(t){var e=L.gmxLocale?L.gmxLocale.getText(t):null;return e||t},d=this;this._showTooltip=function(t,e){var i=e.ring,n=e.originalEvent,o=n.buttons||n.button;if(i&&(i.downObject||!o)){var s=d._map.options||{},l=s.distanceUnit,a=s.squareUnit,r=\"\";if(\"Area\"===t){if(!L.gmxUtil.getArea)return;r=e.originalEvent.ctrlKey?g(\"Perimeter\")+\": \"+L.gmxUtil.prettifyDistance(d.getLength(),l):g(t)+\": \"+L.gmxUtil.prettifyArea(d.getArea(),a),d._parent.showTooltip(e.layerPoint,r)}else if(\"Length\"===t){var h=L.GmxDrawing.utils.getDownType.call(d,e,d._map,d),p=i.getLength(h),c=(\"edit\"===h.mode||h.num>1?h.type:\"\")+t,u=g(c);r=(u===c?g(t):u)+\": \"+L.gmxUtil.prettifyDistance(p,l),d._parent.showTooltip(e.layerPoint,r)}d._fireEvent(\"onMouseOver\")}},this.hideTooltip=function(){this._parent.hideTooltip(),this._fireEvent(\"onMouseOut\")}}}else\"Point\"===this.options.type?this._setMarker(e):this.addLayer(e)},_enableDrag:function(){this._parent._enableDrag()},_disableDrag:function(){this._parent._disableDrag()},_setMarker:function(t){var e=this,i=this._parent;t.bindPopup(null,{maxWidth:1e3,closeOnClick:i._map.options.maxPopupCount>1?!1:!0}).on(\"dblclick\",function(){this._map.removeLayer(this),e.remove()}).on(\"dragstart\",function(){e._fireEvent(\"dragstart\")}).on(\"drag\",function(){e._fireEvent(\"drag\"),e._fireEvent(\"edit\")}).on(\"dragend\",function(){e._fireEvent(\"dragend\")}).on(\"popupopen\",function(i){var n=i.popup;n._input||(n._input=L.DomUtil.create(\"textarea\",\"leaflet-gmx-popup-textarea\",n._contentNode),n._input.value=e.options.title||t.options.title||\"\",n._contentNode.style.width=\"auto\"),L.DomEvent.on(n._input,\"keyup\",function(){var i=this.value.split(\"\\n\"),o=this.cols||0;i.forEach(function(t){t.length>o&&(o=t.length)}),this.rows=i.length,o&&(this.cols=o),n.update(),e.options.title=t.options.title=this.value,this.focus()},n._input),n.update()}),i._map.addLayer(t),e.openPopup=t.openPopup=function(){if(t._popup&&t._map&&!t._map.hasLayer(t._popup)){t._popup.setLatLng(t._latlng);var e=t._map.gmxDrawing;e._drawMode?t._map.fire(e._createType?\"click\":\"mouseup\",{latlng:t._latlng,delta:1}):(t._popup.addTo(t._map),t._popup._isOpen=!0)}return t}},setAddMode:function(){return this.rings.length&&this.rings[0].ring.setAddMode(),this},_pointDown:function(t){this.rings.length&&this.rings[0].ring._pointDown(t)},getPopup:function(){return\"Point\"===this.options.type?this._obj.getPopup():void 0}}),L.GmxDrawing.Ring=L.LayerGroup.extend({options:{className:\"leaflet-drawing-ring\",opacity:1,shape:\"circle\",fill:!0,fillColor:\"#ffffff\",fillOpacity:1,size:L.Browser.mobile?40:8,weight:2},includes:L.Mixin.Events,initialize:function(t,e,i){i=i||{},i.mode=\"\",this._activeZIndex=i.activeZIndex||7,this._notActiveZIndex=i.notActiveZIndex||6,this.options=L.extend({},t.getStyle(),i),this._layers={},this._coords=e,this._legLength=[],this._parent=t,this._initialize(t,e)},_initialize:function(t,e){this.clearLayers(),delete this.lines,delete this.fill,delete this.points,this.downObject=!1,this.mode=\"\",this.lineType=-1!==this.options.type.indexOf(\"Polyline\");var i=this.options.pointStyle,n={opacity:1,weight:2,noClip:!0,clickable:!1,className:\"leaflet-drawing-lines\"};if(this.lineType||(n.fill=\"fill\"in this.options?this.options.fill:!0),this.options.lineStyle)for(var o in this.options.lineStyle)\"fill\"===o&&this.lineType||(n[o]=this.options.lineStyle[o]);this.options.hole&&(n=L.extend({},n,L.GmxDrawing.utils.defaultStyles.holeStyle),i=L.extend({},i,L.GmxDrawing.utils.defaultStyles.holeStyle));var s=e,l=this,a=this.options.mode||(s.length?\"edit\":\"add\");this.lines=new L.Polyline(s,n),this.addLayer(this.lines),this.fill=new L.Polyline(s,{className:\"leaflet-drawing-lines-fill\",opacity:0,fill:!1,size:10,weight:10}),this.addLayer(this.fill),this.lineType||\"edit\"!==a||(this.lines.addLatLng(s[0]),this.fill.addLatLng(s[0])),this.mode=a,this.points=new L.GmxDrawing.PointMarkers(s,i),this.points._parent=this,this.addLayer(this.points),this.points.on(\"mouseover mousemove\",function(t){t.ring=l,\"_showTooltip\"in this&&this._showTooltip(l.lineType?\"Length\":\"Area\",t)},t).on(\"mouseout\",function(){\"hideTooltip\"in this&&this.hideTooltip()},t),this.fill.on(\"mouseover mousemove\",function(t){t.ring=l,\"_showTooltip\"in this&&this._showTooltip(\"Length\",t)},t).on(\"mouseout\",function(){\"hideTooltip\"in this&&this.hideTooltip()},t)},onAdd:function(t){L.LayerGroup.prototype.onAdd.call(this,t),this.setEditMode()},onRemove:function(t){this.points&&(this._pointUp(),this.removeAddMode(),this.removeEditMode(),\"hideTooltip\"in this._parent&&this._parent.hideTooltip()),L.LayerGroup.prototype.onRemove.call(this,t),\"Point\"===this.options.type&&t.removeLayer(this._obj),this._fireEvent(\"removefrommap\")},getLength:function(t){var e=0,i=this.points._latlngs,n=i.length;if(n){var o=1,s=i[0];t&&(\"node\"===t.type?n=t.num+1:(o=t.num,o===n?(s=i[o-1],o=0):s=i[o-1],n=o+1));for(var l=o;n>l;l++){var a=this._legLength[l]||null;null===a&&(a=L.gmxUtil.distVincenty(s.lng,s.lat,i[l].lng,i[l].lat),this._legLength[l]=a),s=i[l],e+=a}}return e},_setPoint:function(t,e,i){if(this.points){var n=this.points._latlngs;\"Rectangle\"===this.options.type?(\"edge\"===i?(e--,0===e?n[0].lng=n[1].lng=t.lng:1===e?n[1].lat=n[2].lat=t.lat:2===e?n[2].lng=n[3].lng=t.lng:3===e&&(n[0].lat=n[3].lat=t.lat)):(n[e]=t,0===e?(n[3].lat=t.lat,n[1].lng=t.lng):1===e?(n[2].lat=t.lat,n[0].lng=t.lng):2===e?(n[1].lat=t.lat,n[3].lng=t.lng):3===e&&(n[0].lat=t.lat,n[2].lng=t.lng)),this._legLength=[]):(n[e]=t,this._legLength[e]=null,this._legLength[e+1]=null),this.setLatLngs(n)}},addLatLng:function(t,e){if(this._legLength=[],this.points){var i=this.points._latlngs,n=i.length,o=i[n-2];o&&o.equals(t)||(e&&(n-=e),this._setPoint(t,n,\"node\"))}else\"addLatLng\"in this._obj&&this._obj.addLatLng(t)},setPositionOffset:function(t){L.DomUtil.setPosition(this.points._container,t),L.DomUtil.setPosition(this.fill._container,t),L.DomUtil.setPosition(this.lines._container,t)},setLatLngs:function(t){if(this.points){var e=this.points;this.fill.setLatLngs(t),this.lines.setLatLngs(t),!this.lineType&&\"edit\"===this.mode&&t.length>2&&(this.lines.addLatLng(t[0]),this.fill.addLatLng(t[0])),e.setLatLngs(t)}else\"setLatLngs\"in this._obj&&this._obj.setLatLngs(t);this._fireEvent(\"edit\")},_pointDown:function(t){if((L.Browser.ie||L.gmxUtil&&L.gmxUtil.gtIE11)&&this._map.dragging._draggable._onUp(),this._parent._disableDrag(),t.originalEvent){var e=t.originalEvent;if(e.ctrlKey)return this._onDragStart(t),void 0;if(1!==e.which&&1!==e.button)return}var i=L.GmxDrawing.utils.getDownType.call(this,t,this._map,this._parent),n=i.type,o=this.options;if(this._lastDownTime=Date.now()+100,this.down=i,\"edge\"===n&&\"Rectangle\"!==o.type){if(o.disableAddPoints)return;this._legLength=[];var s=i.num,l=this.points._latlngs;l.splice(s,0,l[s]),this._setPoint(t.latlng,s,n)}this.downObject=!0,this._map.on(\"mousemove\",this._pointMove,this).on(\"mouseup\",this._pointUp,this)},_pointMove:function(t){this.down&&this._lastDownTime<Date.now()&&(this.lineType||this._parent.showFill(),this._clearLineAddPoint(),this._moved=!0,this._setPoint(t.latlng,this.down.num,this.down.type),\"_showTooltip\"in this._parent&&this._parent._showTooltip(this.lineType?\"Length\":\"Area\",t))},_pointUp:function(t){if(this.downObject=!1,this._parent._enableDrag(),this.points){if(this._map){this._map.off(\"mousemove\",this._pointMove,this).off(\"mouseup\",this._pointUp,this);var e=t&&t.originalEvent?t.originalEvent.target:null;if(e&&e._leaflet_pos&&/leaflet-marker-icon/.test(e.className)){var i=L.GmxDrawing.utils.getMarkerByPos(e._leaflet_pos,this._map.gmxDrawing.getFeatures());this._setPoint(i,this.down.num,this.down.type)}this._map._skipClick=!0}this._drawstop&&this._fireEvent(\"drawstop\"),this._drawstop=!1,this.down=null;var n=this.options.lineStyle||{};n.fill||this.lineType||this._parent.hideFill()}},_lastPointClickTime:0,_removePoint:function(t){var e=this.points._latlngs;e.length>t&&(this._legLength=[],e.splice(t,1),\"Rectangle\"===this.options.type||e.length<2||e.length<3&&!this.lineType?this._parent.remove(this):this._setPoint(e[0],0))},_clearLineAddPoint:function(){this._lineAddPointID&&clearTimeout(this._lineAddPointID),this._lineAddPointID=null},_pointDblClick:function(t){if(this._clearLineAddPoint(),!this._lastAddTime||Date.now()>this._lastAddTime){var e=L.GmxDrawing.utils.getDownType.call(this,t,this._map,this._parent);this._removePoint(e.num)}},_pointClick:function(t){if(!t.originalEvent||!t.originalEvent.ctrlKey){var e=Date.now(),i=this._lastPointClickTime;if(this._lastPointClickTime=e+300,this._moved||i>e)return this._moved=!1,void 0;var n=L.GmxDrawing.utils.getDownType.call(this,t,this._map,this._parent),o=this.mode;if(\"node\"===n.type){var s=n.num;if(n.end){if(\"add\"===o)this._pointUp(),this.setEditMode(),this.lineType&&0===s&&(this._parent.options.type=this.options.type=\"Polygon\",this.lineType=!1,this._removePoint(this.points._latlngs.length-1)),this._fireEvent(\"drawstop\"),this._removePoint(s);else if(this.lineType){var l=this,a=function(){l._clearLineAddPoint(),0===s&&l.points._latlngs.reverse(),l.points.addLatLng(n.latlng),l.setAddMode(),l._fireEvent(\"drawstop\")};this._lineAddPointID=setTimeout(a,250)}}else\"add\"===o&&this.addLatLng(t.latlng)}}},_onDragEnd:function(){this._map.off(\"mouseup\",this._onDragEnd,this).off(\"mousemove\",this._onDrag,this),this._parent._enableDrag(),this._fireEvent(\"dragend\")},_onDragStart:function(t){this._dragstartPoint=t.latlng,this._map.on(\"mouseup\",this._onDragEnd,this).on(\"mousemove\",this._onDrag,this),this._fireEvent(\"dragstart\")},_onDrag:function(t){var e=this._dragstartPoint.lat-t.latlng.lat,i=this._dragstartPoint.lng-t.latlng.lng,n=this.points._latlngs;n.forEach(function(t){t.lat-=e,t.lng-=i}),this._dragstartPoint=t.latlng,this._legLength=[],this.setLatLngs(n),this._fireEvent(\"drag\")},_fireEvent:function(t){this._parent._fireEvent(t)},_startTouchMove:function(t,e){var i=L.GmxDrawing.utils.getDownType.call(this,t,this._map,this._parent);if(\"node\"===i.type){this._parent._disableDrag(),this.down=i;var n=this,o=function(t){i=L.GmxDrawing.utils.getDownType.call(n,t,n._map,this._parent),1===t.touches.length&&n._pointMove(i)},s=function(){L.DomEvent.off(n._map._container,\"touchmove\",o,n).off(n._map._container,\"touchend\",s,n),n._parent._enableDrag(),e&&n._parent.fire(\"drawstop\",{mode:n.options.type,object:n})};L.DomEvent.on(n._map._container,\"touchmove\",o,n).on(n._map._container,\"touchend\",s,n)}},_editHandlers:function(t){var e=L.DomEvent.stopPropagation;if(this.touchstart&&L.DomEvent.off(this.points._container,\"touchstart\",this.touchstart,this),this.touchstartFill&&L.DomEvent.off(this.fill._container,\"touchstart\",this.touchstartFill,this),this.touchstart=null,this.touchstartFill=null,t)if(this.points.on(\"dblclick click\",e,this).on(\"dblclick\",this._pointDblClick,this).on(\"click\",this._pointClick,this),L.Browser.mobile){this._EditOpacity&&this._parent._setPointsStyle({fillOpacity:this._EditOpacity});var i=this;this.touchstart=function(t){i._startTouchMove(t)},L.DomEvent.on(this.points._container,\"touchstart\",this.touchstart,this),this.touchstartFill=function(t){var e=L.GmxDrawing.utils.getDownType.call(i,t,i._map,this._parent);if(\"edge\"===e.type&&\"Rectangle\"!==i.options.type){var n=i.points._latlngs;n.splice(e.num,0,n[e.num]),i._legLength=[],i._setPoint(e.latlng,e.num,e.type)}},L.DomEvent.on(this.fill._container,\"touchstart\",this.touchstartFill,this)}else this.points.on(\"mousemove\",e).on(\"mousedown\",this._pointDown,this),this.fill.on(\"dblclick click\",e,this).on(\"mousedown\",this._pointDown,this),this._fireEvent(\"editmode\");else this._pointUp(),this.points.off(\"dblclick click\",e,this).off(\"dblclick\",this._pointDblClick,this).off(\"click\",this._pointClick,this),L.Browser.mobile||(this.points.off(\"mousemove\",e).off(\"mousedown\",this._pointDown,this),this.fill.off(\"dblclick click\",e,this).off(\"mousedown\",this._pointDown,this))},_createHandlers:function(t){if(this.points){var e=L.DomEvent.stopPropagation;if(t)this._parent._enableDrag(),this._map.on(\"dblclick\",e).on(\"mousedown\",this._mouseDown,this).on(\"mouseup\",this._mouseUp,this).on(\"mousemove\",this._moseMove,this),this.points.on(\"click\",this._pointClick,this),this._fireEvent(\"addmode\"),this.lineType||this.lines.setStyle({fill:!0});else{this._map&&(this._map.off(\"dblclick\",e).off(\"mouseup\",this._mouseUp,this).off(\"mousemove\",this._moseMove,this),this.points.off(\"click\",this._pointClick,this));var i=this.options.lineStyle||{};this.lineType||i.fill||this.lines.setStyle({fill:!1})}}},setEditMode:function(){return this.options.editable&&(this._editHandlers(!1),this._createHandlers(!1),this._editHandlers(!0),this.mode=\"edit\"),this},setAddMode:function(){return this.options.editable&&(this._editHandlers(!1),this._createHandlers(!1),this._createHandlers(!0),this.mode=\"add\"),this},removeAddMode:function(){this._createHandlers(!1),this.mode=\"\"},removeEditMode:function(){this._editHandlers(!1),this.mode=\"\"},_moseMove:function(t){if(this.points){var e=this.points._latlngs;1===e.length&&this._setPoint(t.latlng,1),this._setPoint(t.latlng,e.length-1)}},_mouseDown:function(){this._lastMouseDownTime=Date.now()+200},_mouseUp:function(t){var e=Date.now();if(t.delta||e<this._lastMouseDownTime){this._lastAddTime=e+1e3;var i=t._latlng||t.latlng;t.delta&&this.addLatLng(i,t.delta),this.addLatLng(i),this._parent._parent._clearCreate()}}}),L.GmxDrawing.PointMarkers=L.Polygon.extend({options:{className:\"leaflet-drawing-points\",smoothFactor:0,opacity:1,shape:\"circle\",fill:!0,fillColor:\"#ffffff\",fillOpacity:1,size:L.Browser.mobile?40:8,weight:2},getPathLatLngs:function(){for(var t,e,i=[],n=this.options.size,o=this._parts[0],s=0,l=o.length;l>s;s++)e=o[s],(0===s||Math.abs(t.x-e.x)>n||Math.abs(t.y-e.y)>n)&&(i.push(this._latlngs[s]),t=e);return i},_getPathPartStr:function(t){for(var e,i,n=L.Path.VML,o=this.options.size/2,s=\"add\"!==this._parent.mode||L.Browser.mobile?0:1,l=\"circle\"===this.options.shape?!0:!1,a=0,r=t.length-s,h=\"\";r>a;a++)if(i=t[a],n&&i._round(),0===a||Math.abs(e.x-i.x)>this.options.size||Math.abs(e.y-i.y)>this.options.size){if(l)h+=\"M\"+i.x+\",\"+(i.y-o)+\" A\"+o+\",\"+o+\",0,1,1,\"+(i.x-.1)+\",\"+(i.y-o)+\" \";else{var p=i.x,g=p-o,d=p+o,c=i.y,u=c-o,f=c+o;h+=\"M\"+g+\" \"+u+\"L\"+d+\" \"+u+\"L\"+d+\" \"+f+\"L\"+g+\" \"+f+\"L\"+g+\" \"+u}e=i}return h},_onMouseClick:function(t){this._fireMouseEvent(t)},_isPathChange:function(){this.projectLatlngs();var t=this.getPathString();return t!==this._pathStr?(this._pathStr=t,!0):!1},_updatePath:function(){this._map&&(this._clipPoints(),this._isPathChange()&&(\"inherit\"!==this._path.getAttribute(\"fill-rule\")&&this._path.setAttribute(\"fill-rule\",\"inherit\"),this._path.setAttribute(\"d\",this._pathStr||\"M0 0\")))}}),L.GmxDrawing.utils={defaultStyles:{mode:\"\",map:!0,editable:!0,holeStyle:{opacity:.5,color:\"#003311\"},lineStyle:{opacity:1,weight:2,noClip:!0,clickable:!1,className:\"leaflet-drawing-lines\",color:\"#0033ff\",dashArray:null,lineCap:null,lineJoin:null,fill:!1,fillColor:null,fillOpacity:.2,smoothFactor:1,stroke:!0},pointStyle:{className:\"leaflet-drawing-points\",noClip:!0,smoothFactor:0,opacity:1,shape:\"circle\",fill:!0,fillColor:\"#ffffff\",fillOpacity:1,size:L.Browser.mobile?40:8,weight:2,clickable:!0,color:\"#0033ff\",dashArray:null,lineCap:null,lineJoin:null,stroke:!0},markerStyle:{mode:\"\",editable:!1,title:\"Text example\",options:{alt:\"\",clickable:!0,draggable:!1,keyboard:!0,opacity:1,zIndexOffset:0,riseOffset:250,riseOnHover:!1,icon:{className:\"\",iconUrl:\"\",iconAnchor:[12,41],iconSize:[25,41],popupAnchor:[1,-34],shadowSize:[41,41]}}}},getNotDefaults:function(t,e){var i={};\r\nfor(var n in t)if(\"icon\"!==n&&\"map\"!==n)if(\"iconAnchor\"===n||\"iconSize\"===n||\"popupAnchor\"===n||\"shadowSize\"===n){if(!e[n])continue;(e[n][0]!==t[n][0]||e[n][1]!==t[n][1])&&(i[n]=t[n])}else\"lineStyle\"===n||\"pointStyle\"===n||\"markerStyle\"===n?i[n]=this.getNotDefaults(t[n],e[n]):e&&e[n]===t[n]&&\"fill\"!==n||(i[n]=t[n]);return i},getShiftLatlng:function(t,e,i){if(i&&e){var n=e.latLngToLayerPoint(t)._add(i);t=e.layerPointToLatLng(n)}return t},getDownType:function(t,e,i){var n=t.layerPoint,o=!1,s=t.latlng;if(t.originalEvent&&t.originalEvent.ctrlKey&&(o=!0),t.touches&&1===t.touches.length){var l=t.touches[0],a=e.mouseEventToContainerPoint(l);n=e.containerPointToLayerPoint(a),s=e.layerPointToLatLng(n)}var r={type:\"\",latlng:s,ctrlKey:o},h=this.points?this:t.ring,p=h.points._originalPoints||[],g=p.length;if(0===g)return r;var d=(h.points.options.size||10)/2;d+=1+(h.points.options.weight||2);var c=new L.Bounds(L.point(n.x-d,n.y-d),L.point(n.x+d,n.y+d)),u=p[g-1],f=g-(\"add\"===h.mode?2:1);r={mode:h.mode,layerPoint:t.layerPoint,ctrlKey:o,latlng:s};for(var _=0;g>_;_++){var m=p[_];if(i.shiftPixel&&(m=p[_].add(i.shiftPixel)),c.contains(m)){r.type=\"node\",r.num=_,r.end=0===_||_===f?!0:!1;break}var y=L.LineUtil.pointToSegmentDistance(n,u,m);d>y&&(r.type=\"edge\",r.num=0===_?g:_),u=m}return r},_getLastObject:function(t){if(t.getLayers){var e=t.getLayers().shift();return e.getLayers?this._getLastObject(e):t}return t},getMarkerByPos:function(t,e){for(var i=0,n=e.length;n>i;i++){var o=e[i],s=o._obj?o._obj:null,l=s&&s._icon?s._icon._leaflet_pos:null;if(l&&l.x===t.x&&l.y===t.y)return s._latlng}return null}};\n\n\n// WEBPACK FOOTER //\n// ./external/gmxDrawing/dist/gmxDrawing-min.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./external/gmxDrawing/dist/css/gmxDrawing.css\n// module id = 8\n// module chunks = 0","\r\nclass OsmDataProvider {\r\n    constructor({serverBase, limit}){\r\n        this._serverBase = serverBase;\r\n        this._limit = limit;\r\n        this.showSuggestion = true;        \r\n        this.find = this.find.bind(this);\r\n        this.fetch = this.fetch.bind(this);\r\n        this._convertGeometry = this._convertGeometry.bind(this);\r\n\r\n        this._key = window.KOSMOSNIMKI_SESSION_KEY == null || window.KOSMOSNIMKI_SESSION_KEY == 'INVALID' ? '' : `&key=${window.KOSMOSNIMKI_SESSION_KEY}`;\r\n    }\r\n    _convertGeometry(geometry) {        \r\n        switch (geometry.type.toUpperCase()) {\r\n            case 'POINT':\r\n                geometry.type = 'Point';\r\n                break;\r\n            case 'POLYGON':\r\n                geometry.type = 'Polygon';\r\n                break;\r\n            case 'MULTIPOLYGON':\r\n                geometry.type = 'MultiPolygon';\r\n                break;\r\n            case 'LINESTRING':\r\n            case 'POLYLINE':\r\n                geometry.type = 'LineString';\r\n                break;\r\n            case 'MULTILINESTRING':\r\n                geometry.type = 'MultiLineString';\r\n                break;\r\n            default:\r\n                throw 'Unknown WKT type';\r\n        }\r\n        return geometry;\r\n    }\r\n    fetch (obj) {\r\n        const query = `RequestType=ID&ID=${obj.ObjCode}&TypeCode=${obj.TypeCode}&UseOSM=1`;        \r\n        let req = new Request(`${this._serverBase}/SearchObject/SearchAddress.ashx?${query}${this._key}`);\r\n        let headers = new Headers();\r\n        headers.append('Content-Type','application/json');\r\n        let init = {\r\n            method: 'GET',            \r\n            mode: 'cors',\r\n            cache: 'default',\r\n        };\r\n        return new Promise((resolve, reject) => {\r\n            fetch (req, init)\r\n            .then(response => {\r\n                return response.text();\r\n            })\r\n            .then(text => {\r\n                const json = JSON.parse (text.slice(1, text.length - 1));\r\n                if(json.Status === 'ok'){\r\n                    const rs = json.Result\r\n                    .reduce((a,x) => a.concat(x.SearchResult), [])\r\n                    .map(x => {\r\n                        let g = this._convertGeometry (x.Geometry);\r\n                        let props = Object.keys(x)\r\n                        .filter(k => k !== 'Geometry')\r\n                        .reduce((a,k) => {\r\n                            a[k] = x[k];\r\n                            return a;\r\n                        }, {});\r\n                        return {\r\n                            type: 'Feature',\r\n                            geometry: g,\r\n                            properties: props,\r\n                        };\r\n                    });                    \r\n                    resolve({request: obj, items: rs, provider: this});\r\n                }\r\n                else {\r\n                    reject(json);\r\n                }                \r\n            });\r\n        });\r\n    }\r\n    find(value){        \r\n        const query = `RequestType=SearchObject&IsStrongSearch=0&WithoutGeometry=1&UseOSM=1&Limit=${this._limit}&SearchString=${encodeURIComponent(value)}`;        \r\n        let req = new Request(`${this._serverBase}/SearchObject/SearchAddress.ashx?${query}${this._key}`);\r\n        let headers = new Headers();\r\n        headers.append('Content-Type','application/json');\r\n        let init = {\r\n            method: 'GET',            \r\n            mode: 'cors',\r\n            cache: 'default',\r\n        };\r\n        return new Promise((resolve, reject) => {\r\n            fetch (req, init)\r\n            .then(response => {\r\n                return response.text();\r\n            })\r\n            .then(text => {\r\n                const json = JSON.parse (text.slice(1, text.length - 1));\r\n                if(json.Status === 'ok'){\r\n                    const rs = json.Result.reduce((a,x) => a.concat(x.SearchResult), []); \r\n                    resolve({request: value, items: rs, provider: this});\r\n                }\r\n                else {\r\n                    reject(json);\r\n                }                \r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nwindow.nsGmx = window.nsGmx || {};\r\nwindow.nsGmx.OsmDataProvider = OsmDataProvider;\r\n\r\nexport { OsmDataProvider };\n\n\n// WEBPACK FOOTER //\n// ./src/OsmDataProvider.js"],"sourceRoot":""}